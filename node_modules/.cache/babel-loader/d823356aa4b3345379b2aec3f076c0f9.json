{"ast":null,"code":"import _classPrivateFieldLooseBase from \"C:\\\\Users\\\\kklein\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\react-scripts\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classPrivateFieldLooseBase\";\nimport _classPrivateFieldLooseKey from \"C:\\\\Users\\\\kklein\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\react-scripts\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classPrivateFieldLooseKey\";\n\nvar _img = _classPrivateFieldLooseKey(\"img\");\n\nvar _clippingX = _classPrivateFieldLooseKey(\"clippingX\");\n\nvar _clippingY = _classPrivateFieldLooseKey(\"clippingY\");\n\nvar _spriteWidth = _classPrivateFieldLooseKey(\"spriteWidth\");\n\nvar _spriteHeight = _classPrivateFieldLooseKey(\"spriteHeight\");\n\nvar _x = _classPrivateFieldLooseKey(\"x\");\n\nvar _y = _classPrivateFieldLooseKey(\"y\");\n\nvar _frames = _classPrivateFieldLooseKey(\"frames\");\n\nvar _frameIndex = _classPrivateFieldLooseKey(\"frameIndex\");\n\nvar _lastTimeRendered = _classPrivateFieldLooseKey(\"lastTimeRendered\");\n\nexport default class Sprite {\n  constructor(img, clippingX, clippingY, spriteWidth, spriteHeight, x, y, frames) {\n    Object.defineProperty(this, _img, {\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, _clippingX, {\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, _clippingY, {\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, _spriteWidth, {\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, _spriteHeight, {\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, _x, {\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, _y, {\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, _frames, {\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, _frameIndex, {\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, _lastTimeRendered, {\n      writable: true,\n      value: void 0\n    });\n    _classPrivateFieldLooseBase(this, _img)[_img] = img;\n    _classPrivateFieldLooseBase(this, _clippingX)[_clippingX] = clippingX;\n    _classPrivateFieldLooseBase(this, _clippingY)[_clippingY] = clippingY;\n    _classPrivateFieldLooseBase(this, _spriteWidth)[_spriteWidth] = spriteWidth;\n    _classPrivateFieldLooseBase(this, _spriteHeight)[_spriteHeight] = spriteHeight;\n    _classPrivateFieldLooseBase(this, _x)[_x] = x;\n    _classPrivateFieldLooseBase(this, _y)[_y] = y;\n    _classPrivateFieldLooseBase(this, _frames)[_frames] = frames;\n    _classPrivateFieldLooseBase(this, _frameIndex)[_frameIndex] = 0;\n    _classPrivateFieldLooseBase(this, _lastTimeRendered)[_lastTimeRendered] = performance.now();\n  }\n\n  get x() {\n    return _classPrivateFieldLooseBase(this, _x)[_x];\n  }\n\n  set x(val) {\n    _classPrivateFieldLooseBase(this, _x)[_x] = val;\n  }\n\n  get y() {\n    return _classPrivateFieldLooseBase(this, _y)[_y];\n  }\n\n  set y(val) {\n    _classPrivateFieldLooseBase(this, _y)[_y] = val;\n  }\n\n  draw() {\n    const canvas = document.querySelector('canvas');\n    const context = canvas.getContext('2d');\n    context.drawImage(_classPrivateFieldLooseBase(this, _img)[_img], _classPrivateFieldLooseBase(this, _clippingX)[_clippingX] * 0.99, _classPrivateFieldLooseBase(this, _clippingY)[_clippingY] * 0.99, _classPrivateFieldLooseBase(this, _spriteWidth)[_spriteWidth], _classPrivateFieldLooseBase(this, _spriteHeight)[_spriteHeight], _classPrivateFieldLooseBase(this, _x)[_x], _classPrivateFieldLooseBase(this, _y)[_y], _classPrivateFieldLooseBase(this, _spriteWidth)[_spriteWidth], _classPrivateFieldLooseBase(this, _spriteHeight)[_spriteHeight]);\n  }\n\n  update() {\n    const difference = (performance.now() - _classPrivateFieldLooseBase(this, _lastTimeRendered)[_lastTimeRendered]) / 60;\n\n    if (difference >= 1.1) {\n      //1.1 -> smoothest time to animate\n      _classPrivateFieldLooseBase(this, _lastTimeRendered)[_lastTimeRendered] = performance.now();\n      _classPrivateFieldLooseBase(this, _frameIndex)[_frameIndex] += 1;\n\n      if (_classPrivateFieldLooseBase(this, _frameIndex)[_frameIndex] > _classPrivateFieldLooseBase(this, _frames)[_frames].length - 1) {\n        _classPrivateFieldLooseBase(this, _frameIndex)[_frameIndex] = 0;\n      }\n\n      _classPrivateFieldLooseBase(this, _clippingX)[_clippingX] = _classPrivateFieldLooseBase(this, _frames)[_frames][_classPrivateFieldLooseBase(this, _frameIndex)[_frameIndex]];\n    }\n  }\n\n  render() {\n    this.update();\n    this.draw();\n  }\n\n}","map":{"version":3,"sources":["D:/jump-and-run-js/src/assets/scripts/models/sprite.js"],"names":["Sprite","constructor","img","clippingX","clippingY","spriteWidth","spriteHeight","x","y","frames","performance","now","val","draw","canvas","document","querySelector","context","getContext","drawImage","update","difference","length","render"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AACA,eAAe,MAAMA,MAAN,CAAY;AAavBC,EAAAA,WAAW,CAACC,GAAD,EAAMC,SAAN,EAAiBC,SAAjB,EAA4BC,WAA5B,EAAyCC,YAAzC,EAAuDC,CAAvD,EAA0DC,CAA1D,EAA6DC,MAA7D,EAAqE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAE5E,oDAAYP,GAAZ;AACA,gEAAkBC,SAAlB;AACA,gEAAkBC,SAAlB;AACA,oEAAoBC,WAApB;AACA,sEAAqBC,YAArB;AACA,gDAAUC,CAAV;AACA,gDAAUC,CAAV;AACA,0DAAeC,MAAf;AACA,kEAAmB,CAAnB;AACA,8EAAyBC,WAAW,CAACC,GAAZ,EAAzB;AACH;;AAED,MAAIJ,CAAJ,GAAO;AACH,uCAAO,IAAP;AACH;;AAED,MAAIA,CAAJ,CAAMK,GAAN,EAAU;AACN,gDAAUA,GAAV;AACH;;AAED,MAAIJ,CAAJ,GAAO;AACH,uCAAO,IAAP;AACH;;AAED,MAAIA,CAAJ,CAAMI,GAAN,EAAU;AAEN,gDAAUA,GAAV;AACH;;AAEDC,EAAAA,IAAI,GAAE;AAEF,UAAMC,MAAM,GAAGC,QAAQ,CAACC,aAAT,CAAuB,QAAvB,CAAf;AACA,UAAMC,OAAO,GAAGH,MAAM,CAACI,UAAP,CAAkB,IAAlB,CAAhB;AAEAD,IAAAA,OAAO,CAACE,SAAR,6BACI,IADJ,eAEI,4DAAiB,IAFrB,EAGI,4DAAiB,IAHrB,8BAII,IAJJ,2DAKI,IALJ,6DAMI,IANJ,uCAOI,IAPJ,uCAQI,IARJ,2DASI,IATJ;AAYH;;AAEDC,EAAAA,MAAM,GAAE;AAEJ,UAAMC,UAAU,GAAG,CAACX,WAAW,CAACC,GAAZ,iCAAoB,IAApB,uCAAD,IAA6C,EAAhE;;AAEA,QAAGU,UAAU,IAAI,GAAjB,EAAqB;AAAmB;AAEpC,gFAAyBX,WAAW,CAACC,GAAZ,EAAzB;AACA,qEAAoB,CAApB;;AAEA,UAAG,8DAAmB,oDAAaW,MAAb,GAAsB,CAA5C,EAA8C;AAC1C,sEAAmB,CAAnB;AACH;;AAED,kEAAkB,gFAAa,IAAb,4BAAlB;AACH;AACJ;;AAEDC,EAAAA,MAAM,GAAE;AAEJ,SAAKH,MAAL;AACA,SAAKP,IAAL;AACH;;AApFsB","sourcesContent":["\r\nexport default class Sprite{\r\n\r\n    #img\r\n    #clippingX\r\n    #clippingY\r\n    #spriteWidth\r\n    #spriteHeight\r\n    #x\r\n    #y\r\n    #frames\r\n    #frameIndex\r\n    #lastTimeRendered\r\n\r\n    constructor(img, clippingX, clippingY, spriteWidth, spriteHeight, x, y, frames ){\r\n        \r\n        this.#img = img\r\n        this.#clippingX = clippingX\r\n        this.#clippingY = clippingY\r\n        this.#spriteWidth = spriteWidth\r\n        this.#spriteHeight = spriteHeight\r\n        this.#x = x\r\n        this.#y = y\r\n        this.#frames = frames\r\n        this.#frameIndex = 0\r\n        this.#lastTimeRendered = performance.now()\r\n    }\r\n\r\n    get x(){\r\n        return this.#x\r\n    }\r\n\r\n    set x(val){\r\n        this.#x = val\r\n    }\r\n\r\n    get y(){\r\n        return this.#y\r\n    }\r\n\r\n    set y(val){\r\n   \r\n        this.#y = val\r\n    }\r\n\r\n    draw(){\r\n\r\n        const canvas = document.querySelector('canvas')\r\n        const context = canvas.getContext('2d')\r\n\r\n        context.drawImage(\r\n            this.#img,\r\n            this.#clippingX *0.99,\r\n            this.#clippingY *0.99,\r\n            this.#spriteWidth,\r\n            this.#spriteHeight,\r\n            this.#x,\r\n            this.#y,\r\n            this.#spriteWidth,\r\n            this.#spriteHeight\r\n\r\n        )\r\n    }\r\n\r\n    update(){\r\n\r\n        const difference = (performance.now() - this.#lastTimeRendered)/60\r\n\r\n        if(difference >= 1.1){                  //1.1 -> smoothest time to animate\r\n\r\n            this.#lastTimeRendered = performance.now()            \r\n            this.#frameIndex += 1\r\n\r\n            if(this.#frameIndex > this.#frames.length - 1){\r\n                this.#frameIndex = 0\r\n            }\r\n\r\n            this.#clippingX = this.#frames[this.#frameIndex]\r\n        }\r\n    }\r\n\r\n    render(){\r\n\r\n        this.update()\r\n        this.draw()\r\n    }\r\n    \r\n}"]},"metadata":{},"sourceType":"module"}