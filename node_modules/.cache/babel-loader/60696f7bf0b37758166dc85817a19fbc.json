{"ast":null,"code":"import _classPrivateFieldLooseBase from \"/home/kevin/websites/html/jump-and-run-js/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classPrivateFieldLooseBase\";\nimport _classPrivateFieldLooseKey from \"/home/kevin/websites/html/jump-and-run-js/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classPrivateFieldLooseKey\";\n\nvar _img = _classPrivateFieldLooseKey(\"img\");\n\nvar _clippingX = _classPrivateFieldLooseKey(\"clippingX\");\n\nvar _clippingY = _classPrivateFieldLooseKey(\"clippingY\");\n\nvar _spriteWidth = _classPrivateFieldLooseKey(\"spriteWidth\");\n\nvar _spriteHeight = _classPrivateFieldLooseKey(\"spriteHeight\");\n\nvar _x = _classPrivateFieldLooseKey(\"x\");\n\nvar _y = _classPrivateFieldLooseKey(\"y\");\n\nvar _frames = _classPrivateFieldLooseKey(\"frames\");\n\nvar _frameIndex = _classPrivateFieldLooseKey(\"frameIndex\");\n\nvar _lastTimeRendered = _classPrivateFieldLooseKey(\"lastTimeRendered\");\n\nvar _r = _classPrivateFieldLooseKey(\"r\");\n\nexport default class Sprite {\n  constructor(img, clippingX, clippingY, spriteWidth, spriteHeight, x, y, frames) {\n    Object.defineProperty(this, _img, {\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, _clippingX, {\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, _clippingY, {\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, _spriteWidth, {\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, _spriteHeight, {\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, _x, {\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, _y, {\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, _frames, {\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, _frameIndex, {\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, _lastTimeRendered, {\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, _r, {\n      writable: true,\n      value: void 0\n    });\n    _classPrivateFieldLooseBase(this, _img)[_img] = img;\n    _classPrivateFieldLooseBase(this, _clippingX)[_clippingX] = clippingX;\n    _classPrivateFieldLooseBase(this, _clippingY)[_clippingY] = clippingY;\n    _classPrivateFieldLooseBase(this, _spriteWidth)[_spriteWidth] = spriteWidth;\n    _classPrivateFieldLooseBase(this, _spriteHeight)[_spriteHeight] = spriteHeight;\n    _classPrivateFieldLooseBase(this, _x)[_x] = x;\n    _classPrivateFieldLooseBase(this, _y)[_y] = y;\n    _classPrivateFieldLooseBase(this, _frames)[_frames] = frames;\n    _classPrivateFieldLooseBase(this, _frameIndex)[_frameIndex] = 0;\n    _classPrivateFieldLooseBase(this, _lastTimeRendered)[_lastTimeRendered] = performance.now();\n    _classPrivateFieldLooseBase(this, _r)[_r] = 0;\n  }\n\n  get x() {\n    return _classPrivateFieldLooseBase(this, _x)[_x];\n  }\n\n  set x(val) {\n    _classPrivateFieldLooseBase(this, _x)[_x] = val;\n  }\n\n  get y() {\n    return _classPrivateFieldLooseBase(this, _y)[_y];\n  }\n\n  set y(val) {\n    _classPrivateFieldLooseBase(this, _y)[_y] = val;\n  }\n\n  get r() {\n    return _classPrivateFieldLooseBase(this, _r)[_r];\n  }\n\n  set r(val) {\n    _classPrivateFieldLooseBase(this, _r)[_r] = val;\n  }\n\n  draw() {\n    const canvas = document.querySelector('canvas');\n    const context = canvas.getContext('2d');\n    context.save(); // context.translate(this.#clippingX + this.#spriteWidth/2, this.#y + this.#spriteHeight/2)\n\n    context.rotate(_classPrivateFieldLooseBase(this, _r)[_r] * Math.PI / 3);\n    context.drawImage(_classPrivateFieldLooseBase(this, _img)[_img], _classPrivateFieldLooseBase(this, _clippingX)[_clippingX], _classPrivateFieldLooseBase(this, _clippingY)[_clippingY], _classPrivateFieldLooseBase(this, _spriteWidth)[_spriteWidth], _classPrivateFieldLooseBase(this, _spriteHeight)[_spriteHeight], _classPrivateFieldLooseBase(this, _x)[_x], _classPrivateFieldLooseBase(this, _y)[_y], _classPrivateFieldLooseBase(this, _spriteWidth)[_spriteWidth], _classPrivateFieldLooseBase(this, _spriteHeight)[_spriteHeight]);\n    context.restore();\n  }\n\n  update() {\n    const difference = (performance.now() - _classPrivateFieldLooseBase(this, _lastTimeRendered)[_lastTimeRendered]) / 60;\n\n    if (difference >= 1.1) {\n      //1.1 -> smoothest time to animate\n      _classPrivateFieldLooseBase(this, _lastTimeRendered)[_lastTimeRendered] = performance.now();\n      _classPrivateFieldLooseBase(this, _frameIndex)[_frameIndex] += 1;\n\n      if (_classPrivateFieldLooseBase(this, _frameIndex)[_frameIndex] > _classPrivateFieldLooseBase(this, _frames)[_frames].length - 1) {\n        _classPrivateFieldLooseBase(this, _frameIndex)[_frameIndex] = 0;\n      }\n\n      _classPrivateFieldLooseBase(this, _clippingX)[_clippingX] = _classPrivateFieldLooseBase(this, _frames)[_frames][_classPrivateFieldLooseBase(this, _frameIndex)[_frameIndex]];\n    }\n  }\n\n  render() {\n    this.update();\n    this.draw();\n  }\n\n}","map":{"version":3,"sources":["/home/kevin/websites/html/jump-and-run-js/src/assets/scripts/models/sprite-model.js"],"names":["Sprite","constructor","img","clippingX","clippingY","spriteWidth","spriteHeight","x","y","frames","performance","now","val","r","draw","canvas","document","querySelector","context","getContext","save","rotate","Math","PI","drawImage","restore","update","difference","length","render"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AACA,eAAe,MAAMA,MAAN,CAAY;AAcvBC,EAAAA,WAAW,CAACC,GAAD,EAAMC,SAAN,EAAiBC,SAAjB,EAA4BC,WAA5B,EAAyCC,YAAzC,EAAuDC,CAAvD,EAA0DC,CAA1D,EAA6DC,MAA7D,EAAqE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAE5E,oDAAYP,GAAZ;AACA,gEAAkBC,SAAlB;AACA,gEAAkBC,SAAlB;AACA,oEAAoBC,WAApB;AACA,sEAAqBC,YAArB;AACA,gDAAUC,CAAV;AACA,gDAAUC,CAAV;AACA,0DAAeC,MAAf;AACA,kEAAmB,CAAnB;AACA,8EAAyBC,WAAW,CAACC,GAAZ,EAAzB;AACA,gDAAU,CAAV;AACH;;AAED,MAAIJ,CAAJ,GAAO;AACH,uCAAO,IAAP;AACH;;AAED,MAAIA,CAAJ,CAAMK,GAAN,EAAU;AACN,gDAAUA,GAAV;AACH;;AAED,MAAIJ,CAAJ,GAAO;AACH,uCAAO,IAAP;AACH;;AAED,MAAIA,CAAJ,CAAMI,GAAN,EAAU;AAEN,gDAAUA,GAAV;AACH;;AAED,MAAIC,CAAJ,GAAO;AACH,uCAAO,IAAP;AACH;;AAED,MAAIA,CAAJ,CAAMD,GAAN,EAAU;AACN,gDAAUA,GAAV;AACH;;AACDE,EAAAA,IAAI,GAAE;AAEF,UAAMC,MAAM,GAAGC,QAAQ,CAACC,aAAT,CAAuB,QAAvB,CAAf;AACA,UAAMC,OAAO,GAAGH,MAAM,CAACI,UAAP,CAAkB,IAAlB,CAAhB;AACAD,IAAAA,OAAO,CAACE,IAAR,GAJE,CAKF;;AACAF,IAAAA,OAAO,CAACG,MAAR,CAAe,4CAAUC,IAAI,CAACC,EAAf,GAAoB,CAAnC;AAEAL,IAAAA,OAAO,CAACM,SAAR,6BACI,IADJ,2CAEI,IAFJ,uDAGI,IAHJ,uDAII,IAJJ,2DAKI,IALJ,6DAMI,IANJ,uCAOI,IAPJ,uCAQI,IARJ,2DASI,IATJ;AAYAN,IAAAA,OAAO,CAACO,OAAR;AACH;;AAEDC,EAAAA,MAAM,GAAE;AAEJ,UAAMC,UAAU,GAAG,CAACjB,WAAW,CAACC,GAAZ,iCAAoB,IAApB,uCAAD,IAA6C,EAAhE;;AAEA,QAAGgB,UAAU,IAAI,GAAjB,EAAqB;AAAmB;AAEpC,gFAAyBjB,WAAW,CAACC,GAAZ,EAAzB;AACA,qEAAoB,CAApB;;AAEA,UAAG,8DAAmB,oDAAaiB,MAAb,GAAsB,CAA5C,EAA8C;AAC1C,sEAAmB,CAAnB;AACH;;AAED,kEAAkB,gFAAa,IAAb,4BAAlB;AACH;AACJ;;AAEDC,EAAAA,MAAM,GAAE;AAEJ,SAAKH,MAAL;AACA,SAAKZ,IAAL;AACH;;AAjGsB","sourcesContent":["\nexport default class Sprite{\n\n    #img\n    #clippingX\n    #clippingY\n    #spriteWidth\n    #spriteHeight\n    #x\n    #y\n    #frames\n    #frameIndex\n    #lastTimeRendered\n    #r\n\n    constructor(img, clippingX, clippingY, spriteWidth, spriteHeight, x, y, frames ){\n        \n        this.#img = img\n        this.#clippingX = clippingX\n        this.#clippingY = clippingY\n        this.#spriteWidth = spriteWidth\n        this.#spriteHeight = spriteHeight\n        this.#x = x\n        this.#y = y\n        this.#frames = frames\n        this.#frameIndex = 0\n        this.#lastTimeRendered = performance.now()\n        this.#r = 0\n    }\n\n    get x(){\n        return this.#x\n    }\n\n    set x(val){\n        this.#x = val\n    }\n\n    get y(){\n        return this.#y\n    }\n\n    set y(val){\n   \n        this.#y = val\n    }\n\n    get r(){\n        return this.#r \n    }\n\n    set r(val){\n        this.#r = val\n    }\n    draw(){\n\n        const canvas = document.querySelector('canvas')\n        const context = canvas.getContext('2d')\n        context.save()\n        // context.translate(this.#clippingX + this.#spriteWidth/2, this.#y + this.#spriteHeight/2)\n        context.rotate(this.#r * Math.PI / 3)\n\n        context.drawImage(\n            this.#img,\n            this.#clippingX,\n            this.#clippingY,\n            this.#spriteWidth,\n            this.#spriteHeight,\n            this.#x,\n            this.#y,\n            this.#spriteWidth,\n            this.#spriteHeight\n        )\n\n        context.restore()\n    }\n\n    update(){\n\n        const difference = (performance.now() - this.#lastTimeRendered)/60\n\n        if(difference >= 1.1){                  //1.1 -> smoothest time to animate\n\n            this.#lastTimeRendered = performance.now()            \n            this.#frameIndex += 1\n\n            if(this.#frameIndex > this.#frames.length - 1){\n                this.#frameIndex = 0\n            }\n\n            this.#clippingX = this.#frames[this.#frameIndex]\n        }\n    }\n\n    render(){\n\n        this.update()\n        this.draw()\n    }\n    \n}"]},"metadata":{},"sourceType":"module"}